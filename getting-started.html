---
active_crumb: Docs
layout: documentation
id: getting_started
---

<!--
 Licensed to the Apache Software Foundation (ASF) under one or more
 contributor license agreements.  See the NOTICE file distributed with
 this work for additional information regarding copyright ownership.
 The ASF licenses this file to You under the Apache License, Version 2.0
 (the "License"); you may not use this file except in compliance with
 the License.  You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
-->

<div class="col-md-8 second-column">
    <section id="getting-started">
        <h2 class="section-title">Getting Started</h2>
        <p>
            In this section we'll take a quick 10 minutes look at running and
            testing <a href="https://github.com/apache/incubator-nlpcraft/tree/master/nlpcraft/src/main/scala/org/apache/nlpcraft/examples" target="github">examples</a>
            shipped with NLPCraft along with
            running the main components of NLPCraft - data probe and REST server - using <code>nlpcraft.{sh|cmd}</code> script.
            We assume the following:
        </p>
        <ul>
            <li>You <a href="/download.html">downloaded</a> NLPCraft {{site.latest_version}} as a ZIP archive.</li>
            <li>You followed <a href="/installation.html">installation</a> instructions.</li>
            <li>You are using Mac OS/Linux environment.</li>
        </ul>
    </section>
    <section id="probe-server">
        <h2 class="section-title">Data Probe <span class="amp">&amp;</span> REST Server</h2>
        <p>
            Data probes are used to deploy and host data model, while REST server (or a
            cluster of servers) is used to accept client REST calls and route them to the data model deployed on data probes.
        </p>
        <p>
            Data probe and REST server are both Java applications and therefore can be started in many different ways.
            In this quick tutorial, we'll use <code>nlpcraft.{sh|cmd}</code> script that comes with NLPCraft and acts as a central management
            utility responsible for executing most of the routine tasks in NLPCraft in most simple and productive way.
        </p>
        <p>
            To start REST server and data probe (with default configurations) let's execute following two commands one
            after another:
        </p>
        <pre class="brush: bash">
            $ bin/nlpcraft.sh start-server
            $ bin/nlpcraft.sh start-probe
        </pre>
        <p>
            ...and you will get the following output:
        </p>
        <nav>
            <div class="nav nav-tabs" role="tablist">
                <a class="nav-item nav-link active" data-toggle="tab" href="#nav-srv-start" role="tab" aria-controls="nav-home" aria-selected="true">REST Server</a>
                <a class="nav-item nav-link" data-toggle="tab" href="#nav-probe-start" role="tab" aria-controls="nav-home" aria-selected="true">Data Probe</a>
            </div>
        </nav>
        <div class="tab-content">
            <div class="tab-pane fade show active" id="nav-srv-start" role="tabpanel">
                <p style="margin-top: 15px">
                    <img class="non-fluid-img" src="/images/getting_started_fig1.png" alt="">
                </p>
            </div>
            <div class="tab-pane fade show" id="nav-probe-start" role="tabpanel">
                <p style="margin-top: 15px">
                    <img class="non-fluid-img" src="/images/getting_started_fig2.png" alt="">
                </p>
            </div>
        </div>
        <p>
            At this point you have both the data probe and the REST server started and connected to each other.
            We are ready to start calling REST API to use natural language to query our example models.
        </p>
    </section>
    <section id="querying">
        <h2 class="section-title">Weather Forecast</h2>
        <p>
            We'll be testing <a target="github" href="https://github.com/apache/incubator-nlpcraft/tree/master/nlpcraft/src/main/scala/org/apache/nlpcraft/examples/weather">Weather Example</a>
            to ask questions about weather forecast using REST APIs. This example returns a comprehensive JSON weather
            data for variety of different inquiries about the past, present or future weather conditions.
        </p>
        <p>
            We will be using <code>nlpcraft.{sh|cmd}</code> script to issue REST calls. Let's start by running <code>nlpcraft.{sh|cmd}</code>
            in REPL mode so that we can conveniently issue multiple commands. To get into REPL mode simply launch the <code>nlpcraft.{sh|cmd}</code>
            script with no argument:
        </p>
        <pre class="brush: bash">
            $ bin/nlpcraft.sh
        </pre>
        <p>
            ...with the following output (keep in mind that your REST server and data probe are already started and
            connected to each other):
        </p>
        <p>
            <img class="non-fluid-img" src="/images/getting_started_fig3.png" alt="">
        </p>






        <h3 class="section-title">Sign In</h3>
        <p>
            First, we need to sign in and obtain <b>access token</b>. We'll use <code>/signin</code>
            REST call for that. When REST server starts
            for the first time it creates a default user with email <code>admin@admin.com</code> and
            <code>admin</code> password. Open new command line terminal and let's use these default credentials for sing in:
        </p>
        <pre class="brush: js; highlight: [3]">
            $ nccurl.sh signin '{"email": "admin@admin.com", "passwd": "admin"}'
            {
                "acsTok": "KMGWMQJ44",
                "status": "API_OK"
            }
        </pre>
        <p>
            Note the returned access token <code>KMGWMQJ44</code> which we'll use in subsequent operations. Keep in mind that you
            will get different access tokens and IDs when you are performing these steps by yourself.
        </p>
        <h3 class="section-title"><b>Query</b></h3>
        <p>
            Now that we have signed in (access token <code>KMGWMQJ44</code>) we can go ahead and start asking natural language
            questions against our data model (<code>nlpcraft.weather.ex</code>). For this example we'll use
            <a target="github" href="https://github.com/apache/incubator-nlpcraft/blob/master/openapi/nlpcraft_swagger.yml"><code>/ask/sync</code></a> REST call - a
            call that submit the request and waits for its completion before returning the result.
        </p>
        <p>
            <b>Q: What is the current forecast for Chicago?</b>
        </p>
        <pre class="brush: js highlight: [2, 3, 4, 5]">
            $ nccurl.sh ask/sync '{"acsTok": "KMGWMQJ44", "txt": "What is the current forecast for Chicago?", "mdlId": "nlpcraft.weather.ex"}'
        </pre>
        <p>
            And we get a full 5-day forecast for Chicago:
        </p>
        <pre class="brush: js">
        {
            "state": [
                {
                    "createTstamp": 1552527883277,
                    "mdlId": "nlpcraft.weather.ex",
                    "resBody": {
                        "intentId": "fcast|date?|city?",
                        "result": {
                            "forecast": {
                                "forecastday": [
                                    {
                                        "astro": {
                                            "moonrise": "11:05 AM",
                                            "moonset": "01:01 AM",
                                            "sunrise": "07:06 AM",
                                            "sunset": "06:55 PM"
                                        },
                                    }
                                ]
                            },
                            ...
                            "location": {
                                "lat": "41.85",
                                "localtime": "2019-03-13 20:44",
                                "localtime_epoch": "1552527885",
                                "lon": "-87.65",
                                "name": "Chicago",
                                "region": "Illinois",
                                "tz_id": "America/Chicago"
                            }
                        }
                    },
                    "resType": "json",
                    "srvReqId": "gJ0OJ0qXp",
                    "status": "QRY_READY",
                    "updateTstamp": 1552527885155,
                    "usrId": 7001
                }
            ],
            "status": "API_OK"
        }
        </pre>
        <p>
            <b>Q: Any chance of snow today in Moscow?</b>
        </p>
        <pre class="brush: js highlight: [2, 3, 4, 5]">
            $ nccurl.sh ask/sync '{"acsTok": "KMGWMQJ44", "txt": "Any chance of snow today in Moscow?", "mdlId": "nlpcraft.weather.ex"}'
        </pre>
        <p>
            And we get today's Moscow weather report:
        </p>
        <pre class="brush: js">
            {
                "states": [
                    {
                        "createTstamp": 1552529034568,
                        "mdlId": "nlpcraft.weather.ex",
                        "resBody": {
                            "intentId": "curr|date?|city?",
                            "result": {
                                "forecast": {
                                    "forecastday": [
                                        {
                                            "astro": {
                                                "moonrise": "10:16 AM",
                                                "moonset": "02:16 AM",
                                                "sunrise": "06:49 AM",
                                                "sunset": "06:30 PM"
                                            },
                                            "date": "2019-03-14",
                                            "date_epoch": "1552521600",
                                            "day": {
                                                "avghumidity": 89.0,
                                                "avgtemp_c": -3.9,
                                                "avgtemp_f": 25.1,
                                                "avgvis_km": 19.6,
                                                "avgvis_miles": 12.0,
                                                "condition": {
                                                    "code": 1198.0,
                                                    "icon": "//cdn.apixu.com/weather/64x64/day/311.png",
                                                    "text": "Light freezing rain"
                                                },
                                                "maxtemp_c": -0.2,
                                                "maxtemp_f": 31.6,
                                                "maxwind_kph": 15.8,
                                                "maxwind_mph": 9.8,
                                                "mintemp_c": -7.3,
                                                "mintemp_f": 18.9,
                                                "totalprecip_in": 0.0,
                                                "totalprecip_mm": 0.1,
                                                "uv": 1.7
                                            }
                                        }
                                    ]
                                },
                                "location": {
                                    "lat": "55.75",
                                    "localtime": "2019-03-14 5:03",
                                    "localtime_epoch": "1552529035",
                                    "lon": "37.62",
                                    "name": "Moscow",
                                    "region": "Moscow City",
                                    "tz_id": "Europe/Moscow"
                                }
                            }
                        },
                        "resType": "json",
                        "srvReqId": "bgp299kX0",
                        "status": "QRY_READY",
                        "updateTstamp": 1552529035186,
                        "usrId": 7001
                    }
                ],
                "status": "API_OK"
            }
        </pre>
        <h3 class="section-title">Sign Out</h3>
        <p>
            Once we enjoyed our conversation about the weather we sign out:
        </p>
        <pre class="brush: js highlight: [3]">
            $ nccurl.sh signout '{"acsTok": "KMGWMQJ44"}'
            {
                "status": "API_OK"
            }
        </pre>
    </section>
</div>
<div class="col-md-2 third-column">
    <ul class="side-nav">
        <li class="side-nav-title">On This Page</li>
        <li><a href="#getting-started">Getting Started</a></li>
        <li><a href="#probe-server">Data Probe <span class="amp">&amp;</span> Server</a></li>
        <li><a href="#querying">Using REST API</a></li>
        {% include quick-links.html %}
    </ul>
</div>



