<!--
 Licensed to the Apache Software Foundation (ASF) under one or more
 contributor license agreements.  See the NOTICE file distributed with
 this work for additional information regarding copyright ownership.
 The ASF licenses this file to You under the Apache License, Version 2.0
 (the "License"); you may not use this file except in compliance with
 the License.  You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
-->

<!doctype html><html lang="en"> <script async src="https://www.googletagmanager.com/gtag/js?id=UA-180663034-1"></script> <script> window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'UA-180663034-1'); </script><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="An open source API to convert natural language into actions."><meta name="author" content="NLPCraft."><link rel="apple-touch-icon" sizes="144x144" href="/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="manifest" href="/site.webmanifest"><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5"><meta name="msapplication-TileColor" content="#2d89ef"><meta name="theme-color" content="#ffffff"><title>Apache NLPCraft - Natural Language Interface</title><link rel="stylesheet" href="//stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous"> <script src="//code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script> <script src="//cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script> <script src="//stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js" integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI" crossorigin="anonymous"></script><link href="//use.fontawesome.com/releases/v5.7.1/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" rel="stylesheet" crossorigin="anonymous"><link href="/ext/syntaxhighlighter/styles/shCoreNLPCraft.css" rel="stylesheet" type="text/css"><link href="/ext/syntaxhighlighter/styles/shThemeNLPCraft.css" rel="stylesheet" type="text/css"><link rel="preconnect" href="https://fonts.gstatic.com"><link href="//fonts.googleapis.com/css?family=Amatic+SC|Roboto+Mono|Baskervville" rel="stylesheet"><link href="//fonts.googleapis.com/css2?family=Libre+Baskerville:ital@1&display=swap" rel="stylesheet"> <script src="/ext/syntaxhighlighter/scripts/XRegExp.js" type="text/javascript"></script> <script src="/ext/syntaxhighlighter/scripts/shCore.js" type="text/javascript"></script> <script src="/ext/syntaxhighlighter/scripts/shBrushXml.js" type="text/javascript"></script> <script src="/ext/syntaxhighlighter/scripts/shBrushBash.js" type="text/javascript"></script> <script src="/ext/syntaxhighlighter/scripts/shBrushPlain.js" type="text/javascript"></script> <script src="/ext/syntaxhighlighter/scripts/shBrushJava.js" type="text/javascript"></script> <script src="/ext/syntaxhighlighter/scripts/shBrushScala.js" type="text/javascript"></script> <script src="/ext/syntaxhighlighter/scripts/shBrushIdl.js" type="text/javascript"></script> <script src="/ext/syntaxhighlighter/scripts/shBrushPython.js" type="text/javascript"></script> <script src="/ext/syntaxhighlighter/scripts/shBrushJScript.js" type="text/javascript"></script> <script async defer src="https://buttons.github.io/buttons.js"></script><link rel="stylesheet" type="text/css" href="/assets/css/style.css"/><nav class="navbar navbar-expand-lg navbar-light bg-light" id="top-header"> <a class="navbar-brand mr-4" href="/index.html"> <img src="/images/nlpcraft_logo_white-h24.png" alt=""> </a> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"> <span class="navbar-toggler-icon"></span> </button><div class="collapse navbar-collapse" id="navbarSupportedContent"><ul class="navbar-nav mr-auto"><li class="nav-item"> <a class="nav-link" href="/index.html#features">Features</a><li class="nav-item"> <a class="nav-link" href="/docs.html">Docs <span class="amp">&</span> Tutorials</a><li class="nav-item"> <a class="nav-link" href="/download.html">Downloads <i class="fas fa-download"></i></a><li class="nav-item"> <a class="nav-link" href="/blogs.html">Blog</a><li class="nav-item"> <a class="nav-link" href="/community.html">Community</a><li class="nav-item"> <a class="nav-link" href="/use-cases.html">Use Cases</a></ul><ul class="navbar-nav ml-auto"><li class="nav-item mr-2"> <a class="nav-link" href="/download.html">v.0.8.0</a><li class="nav-item"> <a class="nav-link fork-link" target="github" href="https://github.com/apache/incubator-nlpcraft">GitHub <i class="fab fa-fw fa-github mr-2"></i></a></ul></div></nav><div class="container-fluid"><div class="navbar-aligned"><ol class="breadcrumb"><li class="mr-1"><a href="/index.html">Home</a><li class="mr-1 active">Server <span class="amp">&amp;</span> Probe</ol><h1 class="page-title"> <span> <i class="fas fa-fw fa-book"></i> Server <span class="amp">&amp;</span> Probe </span></h1><div class="row three-cols-container"><div class="col-md-2 first-column"><ul class="side-nav"><li class="side-nav-title">Introduction<li> <a href="/docs.html">Overview</a><li> <a href="/installation.html">Installation</a><li> <a href="/getting-started.html">Getting Started</a><li class="side-nav-title">Developer Guide<li> <a href="/basic-concepts.html">Basic Concepts</a><li> <a href="/first-example.html">First Example</a><li> <a href="/data-model.html">Data Model</a><li> <a href="/intent-matching.html">Intent Matching</a><li> <a href="/using-rest.html">REST API</a><li> <a class="active" href="/server-and-probe.html">Server <span class="amp">&amp;</span> Probe</a><li> <a href="/configuration.html">Configuration</a><li> <a href="/metrics-and-tracing.html">Metrics <span class="amp">&amp;</span> Tracing</a><li> <a href="/integrations.html">Integrations</a><li class="side-nav-title">Tools<li> <a href="/tools/script.html"><code>nlpcraft.{sh|cmd}</code></a><li> <a href="/tools/test_framework.html">Test Framework</a><li> <a href="/tools/embedded_probe.html">Embedded Probe</a><li> <a href="/tools/sql_model_gen.html">SQL Model Generator</a><li> <a href="/tools/syn_tool.html">Synonyms Tool</a><li class="side-nav-title">Examples<li> <a href="/examples/alarm_clock.html">Alarm Clock</a><li> <a href="/examples/light_switch.html">Light Switch</a><li> <a href="/examples/weather_bot.html">Weather Bot</a><li> <a href="/examples/sql_model.html">SQL Model</a></ul></div><div id="server-and-probes" class="col-md-8 second-column"><section><h2 class="section-title">Overview <a href="#"><i class="top-link fas fa-fw fa-angle-double-up"></i></a></h2><p> REST server and data probe are the two runtime components that you need to run when using NLPCraft. Data probes are used to deploy and host data model, while REST server (or a cluster of servers) is used to accept client REST call and route them to the data models via data probes.</p><h2 class="section-sub-title">REST Server vs. Data Probe <a href="#"><i class="top-link fas fa-fw fa-angle-double-up"></i></a></h2><p> It's important to remember why REST server is a separate component from a data probe. While a typical deployment would have only one REST server (or a cluster of REST servers behind a single load balancer), there are maybe multiple data probes hosting different data models deployed in different physical locations, managed through different life cycles and requiring different security and network configurations.</p><p> Moreover, REST server is a heavy and resource consuming component that is built around Apache Ignite distributing in-memory computing capabilities - while the data probe is a lightweight data model container. During the development and testing of data models, the developers need to frequently redeploy data models by restarting the data probe. If the REST server and the data probe would be one component - this process would be very inefficient.</p><div class="bq success"><div class="bq-idea-container"><div><div>ðŸ’¡</div></div><div><p><b>Configuration</b></p><p> Both REST server and the data probe can share their configuration file or be configured individually. Read more about this in <a href="/configuration.html">configuration</a> section.</p></div></div></div><h2 class="section-sub-title">All-Inclusive JAR <a href="#"><i class="top-link fas fa-fw fa-angle-double-up"></i></a></h2><p> <a href="/download.html#zip">Binary</a> NLPCraft ZIP download comes with a single executable JAR file that includes all necessary dependencies (except for examples): <code>build/<b>apache-nlpcraft-incubating-0.8.0-all-deps.jar</b></code>. This single all-inclusive JAR file can be used to start any NLPCraft runtime components as standard Java applications:</p><ul><li><a href="#server">REST Server</a><li><a href="#probe">Data Probe</a><li><a href="/tools/script.html">NLPCraft CLI</a><li><a href="/data-model.html">Model API</a></ul><p> Note that if you downloaded the <a href="/download.html#src">source</a> ZIP you need to run <code class="script">mvn clean package</code> to get the <code>apache-nlpcraft-incubating-<b>0.8.0</b>-all-deps.jar</code> file. It will be located in <code>nlpcraft/target</code> sub-folder.</p><h2 class="section-sub-title">Examples JARs <a href="#"><i class="top-link fas fa-fw fa-angle-double-up"></i></a></h2><p> If you downloaded binary release the examples JARs are pre-built and shipped within it. They are located in <code>build/nlpcraft-examples/xxx</code> folder for each <code>xxx</code> example. If you downloaded a source release you will need to run <code class="script">mvn clean package</code> and examples JARs will be located in each individual module under its <code>target</code> sub-folder.</p></section><section id="server"><h2 class="section-title">REST Server <a href="#"><i class="top-link fas fa-fw fa-angle-double-up"></i></a></h2><p> REST server accepts client REST calls and routes them to the data model hosted by data probes. REST server can be started in different ways:</p><nav><div class="nav nav-tabs" role="tablist"> <a class="nav-item nav-link active" data-toggle="tab" href="#nav-srv-script" role="tab">NLPCraft CLI</a> <a class="nav-item nav-link" data-toggle="tab" href="#nav-srv-class" role="tab">Java Class <img src="/images/java2-h20.png" alt=""></a> <a class="nav-item nav-link" data-toggle="tab" href="#nav-srv-docker" role="tab"><i class="fab fa-docker"></i> Docker</a></div></nav><div class="tab-content"><div class="tab-pane fade show active" id="nav-srv-script" role="tabpanel"><pre class="brush: bash">
                    $ bin/nlpcraft.sh start-server
                </pre><p> <b>NOTES:</b></p><ul><li> <a href="/tools/script.html">NLPCraft CLI</a> is available as <code>nlpcraft.sh</code> for <i class="fab fa-fw fa-linux"></i> and <code>nlpcraft.cmd</code> for <i class="fab fa-fw fa-windows"></i>.<li> Run <code class="script">bin/nlpcraft.sh help --cmd=start-server</code> to get a full help on this command.</ul></div><div class="tab-pane fade show" id="nav-srv-class" role="tabpanel"><p></p><p> If using executable JAR:</p><pre class="brush: bash">
                    $ java -Xms1024m -jar apache-nlpcraft-incubating-0.8.0-all-deps.jar -server
                </pre><p> If specifying additional classpath components and need <code>-cp</code> parameter:</p><pre class="brush: bash">
                    $ java -Xms1024m -cp apache-nlpcraft-incubating-0.8.0-all-deps.jar org.apache.nlpcraft.NCStart -server
                </pre><p> <b>NOTES:</b></p><ul><li> Make sure to provide correct path to <code>apache-nlpcraft-incubating-<b>0.8.0</b>-all-deps.jar</code> file.<li> Class <code>org.apache.nlpcraft.NCStart</code> is a common entry point for all NLPCraft runtime components.<li> Class <code>org.apache.nlpcraft.NCStart</code> should be used to star REST server from IDE.</ul><p> Parameters:</p><dl><dt> <code>-server</code><dd> <em>Mandatory</em> parameter to indicate that you are starting the REST server.<dt><code>-config=path</code><dd> <em>Optional</em> parameter to provide configuration file path. Server will automatically look for <code>nlpcraft.conf</code> configuration file in the same directory as <code>apache-nlpcraft-incubating-<b>0.8.0</b>-all-deps.jar</code> file. If the configuration file has different name or in different location use <code>-config=path</code> parameter where <code>path</code> is an absolute path to the configuration file. Note that the server and the data probe can use the same file for their configuration (like the default <code>nlpcraft.conf</code> contains configuration for both the server and the data probe).<dt><code>-igniteConfig=path</code><dd> <em>Optional</em> parameter to provide <a target=_ href="https://ignite.apache.org/">Apache Ignite</a> configuration file path. Note that Apache Ignite is used as a cluster computing plane and a default distributed storage. Server will automatically look for <code>ignite.xml</code> configuration file in the same directory as <code>apache-nlpcraft-incubating-<b>0.8.0</b>-all-deps.jar</code> file. If the configuration file has different name or in different location use <code>-igniteConfig=path</code> parameter where <code>path</code> is an absolute path to the Ignite configuration file.</dl></div><div class="tab-pane fade show" id="nav-srv-docker" role="tabpanel"><p></p><p> If Docker image is available for given version you can start REST server as follows:</p><pre class="brush: bash">
                    $ docker run -m 8G -p 8081:8081 -p 8201:8201 -p 8202:8202 nlpcraftserver/server:0.8.0
                </pre></div></div><h2 class="section-sub-title">JVM Memory <a href="#"><i class="top-link fas fa-fw fa-angle-double-up"></i></a></h2><p> Make sure to allocate enough memory for server JVM using <code>-Xms</code> JVM option, i.e. <code>-Xms1024m</code>. Many 3rd party NLP engines like Stanford CoreNLP are very memory intensive and may require several GBs of JVM heap allocated depending on the models used. Note that when server JVM has insufficient heap memory the Apache Ignite may throw the following warning logs:</p><pre class="brush: text">
            Jul-22 13:27:56 [INFO ] ...
            Jul-22 13:28:08 [WARN ] Possible too long JVM pause: 11364 milliseconds.
            Jul-22 13:28:11 [INFO ] ...
        </pre><p> <b>NOTES:</b></p><ul><li> <a href="/tools/script.html"><code>nlpcraft.{sh|cmd}</code></a> script automatically uses <code>-Xms1024m</code> for <code>start-server</code> command.</ul><p> The abnormally long GC pauses (over 5s) can be caused by the excessive memory swapping performed by OS due to insufficient JVM heap memory.</p><h2 class="section-sub-title">Apache Ignite 2.x and JDK 11 <a href="#"><i class="top-link fas fa-fw fa-angle-double-up"></i></a></h2><p> NLPCraft REST server uses Apache Ignite 2.x as its distributed in-memory computing plane. Apache Ignite <a target=_new href="https://apacheignite.readme.io/docs/getting-started#running-ignite-with-java-11-and-later-versions">recommends</a> the following additional JVM options to be used when running Apache Ignite 2.x on JDK 11:</p><pre class="brush: text">
--add-opens=java.base/jdk.internal.misc=ALL-UNNAMED
--add-opens=java.base/sun.nio.ch=ALL-UNNAMED
--add-opens=java.base/java.nio=ALL-UNNAMED
--add-opens=java.base/java.io=ALL-UNNAMED
--add-opens=java.base/java.util=ALL-UNNAMED
--add-opens=java.base/java.lang=ALL-UNNAMED
--add-opens=java.management/com.sun.jmx.mbeanserver=ALL-UNNAMED
--add-opens=jdk.internal.jvmstat/sun.jvmstat.monitor=ALL-UNNAMED
--add-opens=java.base/sun.reflect.generics.reflectiveObjects=ALL-UNNAMED
--add-opens=jdk.management/com.sun.management.internal=ALL-UNNAMED
--illegal-access=permit
        </pre><p> <b>NOTES:</b></p><ul><li> <a href="/tools/script.html"><code>nlpcraft.{sh|cmd}</code></a> script automatically uses these options for <code>start-server</code> command.</ul></section><section id="probe"><h2 class="section-title">Data Probe <a href="#"><i class="top-link fas fa-fw fa-angle-double-up"></i></a></h2><p> Data probes are used to deploy and host data mode, and can also be started in several ways:</p><nav><div class="nav nav-tabs" role="tablist"> <a class="nav-item nav-link active" data-toggle="tab" href="#nav-probe-script" role="tab" >NLPCraft CLI</a> <a class="nav-item nav-link" data-toggle="tab" href="#nav-probe-class" role="tab" >Java Class <img src="/images/java2-h20.png" alt=""></a></div></nav><div class="tab-content"><div class="tab-pane fade show active" id="nav-probe-script" role="tabpanel"><pre class="brush: bash">
                    $ bin/nlpcraft.sh start-probe --cp=/path/to/model/classes
                    $ bin/nlpcraft.sh start-probe --cp=/path/to/model/classes --mdls=com.package.MyModel
                </pre><p> <b>NOTES:</b></p><ul><li> <a href="/tools/script.html">NLPCraft CLI</a> is available as <code>nlpcraft.sh</code> for <i class="fab fa-fw fa-linux"></i> and <code>nlpcraft.cmd</code> for <i class="fab fa-fw fa-windows"></i>.<li> <code>--cp</code> parameter must provide additional JVM classpath for models to deploy in this probe.<li> Optional <code>--mdls</code> parameter can be used to specify a one or more specific models to deploy if more than one model is available.<li> Run <code class="script">bin/nlpcraft.sh help --cmd=start-probe</code> to get a full help on this command.</ul></div><div class="tab-pane fade show" id="nav-probe-class" role="tabpanel"><p></p><p> If using executable JAR:</p><pre class="brush: bash">
                    $ java -jar apache-nlpcraft-incubating-0.8.0-all-deps.jar -probe
                </pre><p> If specifying additional classpath components and need <code>-cp</code> parameter:</p><pre class="brush: bash">
                    java -cp apache-nlpcraft-incubating-0.8.0-all-deps.jar:/my/project/classes org.apache.nlpcraft.NCStart -probe -config=/my/project/probe.conf
                </pre><p> <b>NOTES:</b></p><ul><li> <code>/my/project</code> directory contains user-defined model implementation<li> Make sure to provide correct path to <code>apache-nlpcraft-incubating-<b>0.8.0</b>-all-deps.jar</code> file.<li> Class <code>org.apache.nlpcraft.NCStart</code> is a common entry point for all NLPCraft runtime components.<li> Class <code>org.apache.nlpcraft.NCStart</code> should be used to star data probe from IDE.</ul><p> Parameters:</p><dl><dt> <code>-probe</code><dd> <em>Mandatory</em> parameter to indicate that you are starting a data probe.<dt><code>-config=path</code><dd><p> <em>Optional</em> parameter to provide probe configuration file path. Data probe will automatically look for <code>nlpcraft.conf</code> configuration file in the same directory as <code>apache-nlpcraft-incubating-<b>0.8.0</b>-all-deps.jar</code> file. If the configuration file has different name or in different location use <code>-config=path</code> parameter where <code>path</code> is an absolute path to the data probe configuration file. Note that the server and the data probe can use the same file for their configuration (like the default <code>nlpcraft.conf</code> contains configuration for both the server and the data probe).</p></dl></div></div></section><section id="testing"><h2 class="section-title">CI Testing <a href="#"><i class="top-link fas fa-fw fa-angle-double-up"></i></a></h2><p> It is a good practice to run units tests during routine builds using Maven (or others CI toolchains). To test data models you need to have a running server and then start one or more data probes with models you want to test. While doing this from IDE can be trivial enough, doing this from Maven can be tricky.</p><p> The challenge is that from the Maven build you need to start the server, wait til its fully started and initialized, and only then start issuing REST calls, start data probes or run tests that use <a href="/tools/embedded_probe.html">embedded probes</a>. When done manually (e.g. from IDE) you can visually observe when the server finished its startup and then manually launch the tests. In Maven, however, you need to use a special plugin to accomplish the same in automated fashion.</p><div class="bq info"> <b>Probe Waits For Server</b><p> Technically, when a data probe starts up it will initialize, load the models, and will automatically wait for the server to get online if it isn't yet (as well as periodically check for it). Once server is online the data probe will automatically connect to it. However, if the unit tests don't use data probe and only issue REST calls then these tests have to somehow wait for the server to get online.</p><p> To overcome this challenge you can use <a target="github" href="https://github.com/bazaarvoice/maven-process-plugin"><code>process-exec-maven-plugin</code></a> Maven plugin.</p></div><p> To get around this problem NLPCraft uses <a target="github" href="https://github.com/bazaarvoice/maven-process-plugin"><code>process-exec-maven-plugin</code></a> Maven plugin in its own build. This plugin allows to start the external process and use configured URL endpoint to check whether or not the external process has fully started. This works perfect with NLPCraft server <a href="/using-rest.html">health check REST call</a>. The plugin can be configured in the following way for your own project (taken directly from NLPCraft <a target="github" href="https://github.com/apache/incubator-nlpcraft/blob/master/nlpcraft/pom.xml"><code>pom.xml</code></a>):</p><pre class="brush: xml, highlight: [14, 16, 32]">
&lt;plugin&gt;
    &lt;groupId&gt;com.bazaarvoice.maven.plugins&lt;/groupId&gt;
    &lt;artifactId&gt;process-exec-maven-plugin&lt;/artifactId&gt;
    &lt;version&gt;0.9&lt;/version&gt;
    &lt;executions&gt;
        &lt;execution&gt;
            &lt;id&gt;pre-integration-test&lt;/id&gt;
            &lt;phase&gt;pre-integration-test&lt;/phase&gt;
            &lt;goals&gt;
                &lt;goal&gt;start&lt;/goal&gt;
            &lt;/goals&gt;
            &lt;configuration&gt;
                &lt;name&gt;server&lt;/name&gt;
                &lt;healthcheckUrl&gt;http://localhost:8081/api/v1/health&lt;/healthcheckUrl&gt;
                &lt;waitAfterLaunch&gt;180&lt;/waitAfterLaunch&gt;
                &lt;processLogFile&gt;${project.build.directory}/server.log&lt;/processLogFile&gt;
                &lt;arguments&gt;
                    &lt;argument&gt;java&lt;/argument&gt;
                    &lt;argument&gt;-Xmx4G&lt;/argument&gt;
                    &lt;argument&gt;-Xms4G&lt;/argument&gt;
                    &lt;argument&gt;--add-opens=java.base/jdk.internal.misc=ALL-UNNAMED&lt;/argument&gt;
                    &lt;argument&gt;--add-opens=java.base/sun.nio.ch=ALL-UNNAMED&lt;/argument&gt;
                    &lt;argument&gt;--add-opens=java.base/java.nio=ALL-UNNAMED&lt;/argument&gt;
                    &lt;argument&gt;--add-opens=java.base/java.io=ALL-UNNAMED&lt;/argument&gt;
                    &lt;argument&gt;--add-opens=java.base/java.util=ALL-UNNAMED&lt;/argument&gt;
                    &lt;argument&gt;--add-opens=java.base/java.lang=ALL-UNNAMED&lt;/argument&gt;
                    &lt;argument&gt;--add-opens=java.management/com.sun.jmx.mbeanserver=ALL-UNNAMED&lt;/argument&gt;
                    &lt;argument&gt;--add-opens=jdk.internal.jvmstat/sun.jvmstat.monitor=ALL-UNNAMED&lt;/argument&gt;
                    &lt;argument&gt;--add-opens=java.base/sun.reflect.generics.reflectiveObjects=ALL-UNNAMED&lt;/argument&gt;
                    &lt;argument&gt;--add-opens=jdk.management/com.sun.management.internal=ALL-UNNAMED&lt;/argument&gt;
                    &lt;argument&gt;--illegal-access=permit&lt;/argument&gt;
                    &lt;argument&gt;-DNLPCRAFT_ANSI_COLOR_DISABLED=true&lt;/argument&gt;
                    &lt;argument&gt;-Djdk.tls.client.protocols=TLSv1.2&lt;/argument&gt;
                    &lt;argument&gt;-jar&lt;/argument&gt;
                    &lt;argument&gt;${project.build.directory}/${nlpcraft.all.deps.jar}&lt;/argument&gt;
                    &lt;argument&gt;-server&lt;/argument&gt;
                &lt;/arguments&gt;
            &lt;/configuration&gt;
        &lt;/execution&gt;
        &lt;execution&gt;
            &lt;id&gt;stop-all&lt;/id&gt;
            &lt;phase&gt;post-integration-test&lt;/phase&gt;
            &lt;goals&gt;
                &lt;goal&gt;stop-all&lt;/goal&gt;
            &lt;/goals&gt;
        &lt;/execution&gt;
    &lt;/executions&gt;
&lt;/plugin&gt;
        </pre><p> <b>NOTES</b>:</p><ul><li> On line 14 we specify the URL endpoint to check whether or not our server is online. We use <code>/health</code> localhost REST call for that.<li> On line 16 we redirect the output from server to a dedicated file to <b>avoid interleaving</b> log from server and log from data probe in the same console (where we are running the Maven build from). Such interleaving will make the combined log unreadable and can cause output problem for the console due to mixed up ANSI escape sequences from server and data probe.<li> Since the server log is piped out to a separate file we disable ANSI coloring for the server on the line 32.</ul><div class="bq info"> <b>Avoid Interleaving Logs</b><p> When running both server and the data probe(s) from the Maven build it is important to avoid interleaving logs from the server and the probe. Such interleaving will make the combined log in Maven unreadable and can cause console malfunction due to mixed up ANSI escape codes. It is idiomatic in such cases to:</p><ul><li> Disable ANSI coloring for the server via <code>-D<b>NLPCRAFT_ANSI_COLOR_DISABLED</b>=true</code><li> Pipe out the server log into a dedicated file using Maven plugins like <a target="github" href="https://github.com/bazaarvoice/maven-process-plugin"><code>process-exec-maven-plugin</code></a>.</ul></div><br/></section></div><div class="col-md-2 third-column"><ul class="side-nav"><li class="side-nav-title">On This Page<li><a href="#server">REST Server</a><li><a href="#probe">Data Probe</a><li><a href="#testing">CI Testing</a><li class="side-nav-title">Quick Links<li> <i class="fab fa-fw fa-github mr-2"></i><a target="github" href="https://github.com/apache/incubator-nlpcraft/tree/master/nlpcraft-examples">Examples</a><li> <i class="fab fa-fw fa-java mr-2"></i><a target="_" href="/apis/latest/index.html">Javadoc</a><li> <i class="fas fa-fw fa-code mr-2"></i><a href="https://app.swaggerhub.com/apis-docs/Apache-NLPCraft/apache-nlpcraft/0.8.0" target="swaggerhub">REST API</a><li> <i class="fas fa-fw fa-download mr-2"></i><a href="/download.html">Download</a><li> <i class="fas fa-fw fa-magic mr-2"></i><a href="/cheat-sheet.html">Cheat Sheet</a><li class="side-nav-title">Support<li> <nobr> <i class="fab fa-fw fa-jira mr-2"></i><a target="jira" href="https://issues.apache.org/jira/projects/NLPCRAFT/issues">JIRA</a> </nobr><li> <nobr> <i class="far fa-fw fa-envelope mr-2"></i><a href="https://mail-archives.apache.org/mod_mbox/nlpcraft-dev/">Dev List</a> </nobr><li> <nobr> <i class="fab fa-fw fa-stack-overflow mr-2"></i><a target="so" href="https://stackoverflow.com/questions/ask">Stack Overflow</a> </nobr><li> <nobr> <i class="fab fa-fw fa-github mr-2"></i><a target="github" href="https://github.com/apache/incubator-nlpcraft">GitHub</a> </nobr><li> <nobr> <i class="fab fa-fw fa-gitter mr-2"></i><a target="gitter" href="https://gitter.im/apache-nlpcraft/community">Gitter</a> </nobr></ul></div></div></div></div><div id="footer"><div class="container"><div class="text-muted text-center"> <span>Copyright &copy; 2021 Apache Software Foundation</span> <span> <a target=_new href="https://apache.org"><img alt="asf" src="/images/asf_logo-h24.png"></a> </span> <a target="asf" href="https://www.apache.org/events/current-event.html" class="btn btn-link ml-4">Events</a> <span class="sep">â€¢</span> <a target="asf" href="https://apache.org/foundation/policies/privacy.html" class="btn btn-link">Privacy</a> <span class="sep">â€¢</span> <a href="/index.html#news" class="btn btn-link">News</a> <span class="sep">â€¢</span> <a href="/docs.html" class="btn btn-link">Docs</a> <span class="ml-4">release: <a href="/download.html"><code>0.8.0</code></a></span> <span class="ml-2"> <a target="github" href="https://github.com/apache/incubator-nlpcraft/actions"><img alt="" src="https://github.com/apache/incubator-nlpcraft/workflows/build/badge.svg"></a> <a target=_ href="https://gitter.im/apache-nlpcraft/community"><img alt="Gitter" src="https://badges.gitter.im/apache-nlpcraft/community.svg"></a> </span> <span class="ml-2"> Built in:<a target="scala" href="https://scala-lang.org/"><img style="margin-left: 5px" src="/images/scala-logo-h16.png" alt=""></a> </span></div></div></div><script src="//code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script> <script src="//cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script> <script src="//stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script> <script src="//cdnjs.cloudflare.com/ajax/libs/lodash.js/4.17.4/lodash.min.js" type="text/javascript" ></script> <script src="//cdnjs.cloudflare.com/ajax/libs/moment.js/2.12.0/moment.min.js" type="text/javascript" ></script> <script src="//cdnjs.cloudflare.com/ajax/libs/moment-timezone/0.5.5/moment-timezone-with-data.min.js" type="text/javascript" ></script> <script type="text/javascript"> SyntaxHighlighter.defaults["auto-links"] = false; SyntaxHighlighter.defaults["tab-size"] = 2; SyntaxHighlighter.all(); </script>
